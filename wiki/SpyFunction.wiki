{{{
void __fastcall SPY_Resolve_Player_Spies_(int a1)
{
  int v1; // edx@3
  int v2; // ecx@3
  int nOffenderSpyBonus; // ebx@3
  int nOffenderSpies; // edi@3
  int v5; // esi@3
  int ptrPlayer; // esi@3
  int nBonusesDifference; // ebx@4
  int randDefence; // eax@4
  int v9; // edx@4
  int randOffence2__; // ecx@4
  int nOffenderTotalBonus; // ebx@4
  unsigned __int16 v12; // ax@7
  int v13; // edx@7
  int v14; // ecx@7
  char v15; // al@15
  int v16; // ecx@25
  int v17; // ebx@25
  int v18; // esi@25
  int v19; // ebx@25
  unsigned int v20; // eax@25
  int v21; // edx@25
  __int16 v22; // cx@32
  int v23; // esi@34
  unsigned int v24; // eax@36
  __int16 v25; // si@36
  __int16 v26; // cx@36
  int v27; // [sp-8h] [bp-64h]@32
  int ptrDefenderPlayer; // [sp+0h] [bp-5Ch]@1
  char v29; // [sp+4h] [bp-58h]@36
  __int16 v30; // [sp+6h] [bp-56h]@36
  int v31; // [sp+8h] [bp-54h]@36
  int v32; // [sp+Ch] [bp-50h]@36
  int v33; // [sp+10h] [bp-4Ch]@36
  __int16 v34; // [sp+14h] [bp-48h]@36
  char v35; // [sp+18h] [bp-44h]@32
  __int16 v36; // [sp+1Ah] [bp-42h]@32
  int v37; // [sp+1Ch] [bp-40h]@32
  int v38; // [sp+20h] [bp-3Ch]@32
  int v39; // [sp+24h] [bp-38h]@32
  __int16 v40; // [sp+28h] [bp-34h]@32
  int nOffenderSpyBonus2; // [sp+2Ch] [bp-30h]@3
  int nDefenderSpyBonus; // [sp+30h] [bp-2Ch]@1
  unsigned int randOffence; // [sp+34h] [bp-28h]@4
  int nDefenderTechBonus; // [sp+38h] [bp-24h]@4
  int ptrDef; // [sp+3Ch] [bp-20h]@1
  int PtrDefenderTechArray; // [sp+40h] [bp-1Ch]@1
  int nNumOfPlayers; // [sp+44h] [bp-18h]@1
  int nNumOfSpies; // [sp+48h] [bp-14h]@1
  unsigned int nUnknown; // [sp+4Ch] [bp-10h]@1
  int ptrPlayer4; // [sp+50h] [bp-Ch]@1
  int ptrOffender; // [sp+54h] [bp-8h]@1
  int v52; // [sp+58h] [bp-4h]@21

  ptrDefenderPlayer = a1;
  ptrDef = (a1 - MOX__player) / 3753;
  nNumOfSpies = BILL_Get_Their_Spy_Number_((a1 - MOX__player) / 3753, (a1 - MOX__player) / 3753);
  nDefenderSpyBonus = SPY_N_Spies_Bonus_(nNumOfSpies);
  nNumOfPlayers = MOX__NUM_PLAYERS;
  PtrDefenderTechArray = 4 * ptrDef;
  ptrPlayer4 = 3753 * MOX__NUM_PLAYERS;
  nUnknown = 0;
  ptrOffender = 4 * MOX__NUM_PLAYERS;
  while ( nNumOfPlayers > 0 )
  {
    --nNumOfPlayers;
    ptrPlayer4 -= 3753;
    ptrOffender -= 4;
    if ( nNumOfPlayers != ptrDef )              // Åñëè ýòî ìû ñàìè
    {
      ptrPlayer = MOX__player;
      nOffenderSpies = BILL_Get_Their_Spy_Number_(nNumOfPlayers, ptrDef);
      v5 = ptrPlayer4 + ptrPlayer;
      nOffenderSpyBonus = SPY_N_Spies_Bonus_(nOffenderSpies);
      nOffenderSpyBonus2 = nOffenderSpyBonus;
      if ( nOffenderSpies )
      {
        randDefence = random_Random(100, v1, nOffenderSpyBonus, v2);// Ðàíäîìíîå ÷èñëî îò 0 äî 100, îñòàëüíûå ÷èñëà çíà÷åíèÿ íå íåñóò.
        randOffence = random_Random(100, v9, nOffenderSpyBonus, randDefence);// Îïÿòü ðàíäîìíîå ÷èñëî îí 0 äî 100
        nDefenderTechBonus = *(SPY__spy_bonuses + ptrOffender);
        nOffenderTotalBonus = nDefenderTechBonus + randOffence2__ + nOffenderSpyBonus;// randOffence è randOffence2__ ýòî îäíî ÷èñëî, (ñóäÿ ïî ðåãèöòðó öõ) ïðîñòî äåêîìïèëÿòîð îøèáñÿ, â òîì, ÷òî äóìàåò ÷òî ýòî äâà ÷èñëà. ò.å. randOffence2___ ýòî ñëó÷àéíîå ÷èñëî îò 0 äî 100
        nDefenderTechBonus = *(&word_1A4E7A + PtrDefenderTechArray);
        nBonusesDifference = nOffenderTotalBonus - (nDefenderSpyBonus + nDefenderTechBonus + randOffence);
        if ( *(v5 + 40) != 100 )
        {
          if ( *(ptrDefenderPlayer + 40) == 100 )
            nBonusesDifference += byte_191CB0 - 2;
        }
        v12 = BILL_Get_Their_Spy_Mission_(nNumOfPlayers, ptrDef, nBonusesDifference);
        if ( v12 < 1u )
        {
          if ( !v12 )
          {
            if ( nBonusesDifference >= 60 || v14 == 100 )
            {
              if ( nBonusesDifference >= 80 || v14 == 100 )
              {
                v15 = 0;
                if ( nBonusesDifference >= 90 || v14 == 100 )
                  v15 = 1;
                nBonusesDifference = v15;
                SPY_Steal_App_(v5, ptrDefenderPlayer, v15);
              }
            }
          }
        }
        else
        {
          if ( v12 <= 1u )
          {
            if ( nBonusesDifference >= 70 || v14 == 100 )
            {
              v52 = nNumOfPlayers;
              if ( nBonusesDifference >= 90 || v14 == 100 )
                SPY_Frame_Another_(nNumOfPlayers, ptrDef, &v52, -1);
              nBonusesDifference = v52;
              SPY_Destroy_Random_Building_(nNumOfPlayers, ptrDef, v52);
            }
          }
        }
        v19 = random_Random(100, v13, nBonusesDifference, v14);
        v18 = v19;
        v20 = random_Random(100, ptrOffender, v19, v16);
        v17 = nOffenderSpyBonus2
            + *(SPY__spy_bonuses + v21)
            + v19
            - (nDefenderSpyBonus
             + *(&word_1A4E7A + PtrDefenderTechArray)
             + v20
             + 20);
        if ( BILL_Get_Their_Spy_Mission_(nNumOfPlayers, ptrDef, v17) == 2 )
          v17 += 20;
        if ( v17 >= 80 || v18 == 100 )
          ++nUnknown;
        if ( v17 <= -80 || v16 == 100 )
        {
          BILL_Set_Their_Spy_Number_(nNumOfPlayers, ptrDef, (nOffenderSpies - 1));
          set386_memset_(&v35, 0, 18);
          v35 = 10;
          v36 = ptrDef;
          LOWORD(v27) = v40;
          MSG_Add_Msg_(10, v37, v38, v39, v27, v22);
        }
      }
    }
  }
  JUMPOUT(nUnknown, 0, *locret_101195);
  v23 = nNumOfSpies - nUnknown;
  if ( (nNumOfSpies - nUnknown) < 0 )
    v23 = 0;
  BILL_Set_Their_Spy_Number_(ptrDef, ptrDef, v23);
  v24 = nNumOfSpies - v23;
  v25 = nNumOfSpies - v23;
  JUMPOUT(v24, 0, *locret_101195);
  set386_memset_(&v29, 0, 18);
  v30 = v25;
  v29 = 11;
  LOWORD(v27) = v34;
  MSG_Add_Msg_(11, v31, v32, v33, v27, v26);
  JUMPOUT(*locret_101195);
}
}}}